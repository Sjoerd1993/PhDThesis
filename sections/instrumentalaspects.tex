\chapter{Reflectometry}\label{instrumentalaspects}
\section{Neutron and X-ray reflectometry}
Both neutron- and X-ray reflectometry are non-destructive characterization techniques that can be used to obtain structural information about thin film multilayers. 
The combination of neutron- and X-ray reflectometry is probably the technique that has been used most throughoughly in this work to investigate multilayers. The physical principles for both neutron and X-ray reflectometry are essentially the same from a wave perspective, and are further elaborated in chapter \ref{scatteringtheory}. Because of this strong similarity, both techniques also give very similar information about the measured samples. Despite the high similarity between the two techniques, there are some clear differences that makes neutron scattering an interesting choice for many experiments. It is for instance not possible to measure magnetic properties with conventional X-ray reflectivity. Also the short penetration length for instance makes it more difficult to measure bulk materials with X-rays. In the scope of this work, the biggest reason to complement X-ray data with neutron measurement is the fact that the scattering length for neutrons vary wildly per isotope as explained in section \ref{neutronscatteringlengths}, making it possible to distinguish different isotopes of the same element. This makes it possible to measure isotope modulated multilayers, where a chemically homogenous sample forms a multilayer by altering the isotope in each layer. Another advantage of the isotope sensitive nature of neutron scattering is that this allows to obtain two independent datasets that describe the same structural information about a sample. Combining these two techniques allows for a combined fitting of the reflectiviy data, where the fitting parameters are fixed to be equal in both measurements, giving more reliable fits to physical data. This makes the combination of both X-ray reflectivity and neutron reflectivity a very powerful tool for mathematical fits to simulated data.\\
Two distinct types of measurements can be distinguished with these kind of reflectometry measurements, specular and off-specular measurements. As explained in section \ref{off_specular_section}, the specular measurements provide structural information along the growth-direction of the sample, such as interface width and periodicity, while the off-specular measurements provide information about the nature of the roughness that is present at the interfaces. In order to obtain quantitative information about the sample structure, the diffraction patterns can be fitted to mathematical simulations as covered in chapter \ref{reflectivitysimulations}. 
\section{The overillumination effect}
As diffraction experiments in this work are typically done at low incidence angles, it is important to consider the size of the beam on the sample. Just like when one points a flashlight at a wall, the size of the beam spot will increase at low angles of incidence, this is further illustrated in Figure \ref{footprint_effect}. The size of the beam is often called the footprint of the beam. Due to this effect, a large part of the incident beam will miss the sample at low incidence angles as shown in Figure \ref{footprint_effect}, leading to a reduction of intensity at low incidence angles. The practical effects on a measurement is shown in Figure \ref{raw_measurement} a), instead of having full intensity below the critical angle, the intensity is signficantly lower at these low incidence angles. This effect is often referred to as overillumination. In order to take this into account for data analysis, the data needs to be corrected using the geometry and the beam profile. The experimentally measured curve can be expressed as:
\begin{equation}
	E(\theta) = g(\theta)R(\theta).
\end{equation}
Where $g(\theta)$ is the attenuation factor due to the overillumination effect, and $R(\theta)$ describes the theoretical reflectivity curve in absence of this factor. The factor $g(\theta)$ can be determined by considering the geometry of the beam which then reduces to \cite{footprintnew} \cite{footprintold}:
\begin{equation}
	\frac{\int^{(L/2)\sin \theta}_{-(L/2)\sin \theta} P(z) \dd z}{\int^{(L/2)\sin \theta_{so}}_{-(L/2)\sin \theta_{so}} P(z) \dd z}.
\end{equation}
where $L$ is the size of the sample, $\theta$ the incidence angle and $\theta_{so}$ the beam over-spill angle, which is the angle where the beam spot size is exactly the same as the sample length. This situation where the incidence angle $\theta$ is equal to the beam over-spill angle $\theta_{so}$ is shown in Figure \ref{footprint_effect} b). The factor $P(z)$ is the beam profile, which for a Gaussian beam can be expressed as 
\begin{equation}
	P(z) = A \exp(\frac{z^2}{2\sigma^2}).
\end{equation}
$A$ describes the amplitude and $\sigma$ the half-width at half-maximum (HWHM) of the beam. For the analysis done in this work, the overillumination effect for neutrons has been corrected by PySared, which is the dedicated data reduction software at the SuperAdam beamline, using a trapeziod neutron beam profile. The resulting measurement after overillumination correction is shown in Figure \ref{raw_measurement} b). For X-rays, the correction has been performed by the GenX software \cite{genx} \cite{genx_new} using a Gaussian beam profile.
\begin{figure}
	\centering
	\def\svgwidth{\textwidth}
	\input{footprint_effect.pdf_tex}
	\caption{The footprint of the sample depends on the incidence angle, when the angle is low enough the footprint of the beam will be too large to fit on the entire sample.}
	\label{footprint_effect}
\end{figure}
\begin{figure}
	\centering
	\def\svgwidth{\textwidth}
	\input{raw_measurement.pdf_tex}
	\caption{a) A raw neutron reflectivity measurement. At low incidence angles, the beam spot is too large to fit on the entire sample, leading to a reduction in measured intensity at low incidence angles. b) A neutron reflectivity measurement after overillumination correction.}
	\label{raw_measurement}
\end{figure}
\clearpage
\section{Neutron instrument}
The neutron reflectivity measurements in this work have been performed on the neutron reflectometer SuperADAM at Institut Laue-Langevin (ILL) \cite{superadam}.  The measurements have been performed at a neutron wavelength of 5.21 Ã…. A sketch of the instrument can be seen in Figure \ref{superadamsketch}. The monochromator consists of a highly oriented pyrolytic graphite (HOPG) crystal which selects a single neutron wavelength, where a beryllium filter is used to suppress higher order harmonics that are also reflected by the monochromator. The slits collimate the beam, shaping the beam. The polarizer, magnetic field and the spin flipper are needed for polarised neutron reflectometry (PNR), which is not covered in this work. The mentioned polarizer, which is a solid state filter, can filter out unwanted wavelength harmonics as well \cite{superadam}. The sample is kept in place at the sample holder, after which the reflected neutron beam travels through flight tubes towards the position sensitive detector (PSD) where off-specular and specular diffraction patterns can be measured simultaneously. 
\begin{figure}[b]
	\centering
	\def\svgwidth{\textwidth}
	\input{superadam.pdf_tex}
	\caption{A top-down sketch of the SuperAdam neutron reflectometer located at ILL, which has been used for the neutron measurements covered in this work.}
\label{superadamsketch}
\end{figure}

\subsection{Alignment procedure}
Depending on the relevant features in the diffraction pattern, a good alignment of the sample can be extremely important. A proper correction of the overillumination effect in particular is strongly dependent on a good alignment of the sample \cite{footprintnew}. The neutron reflectivity measurements in this work have all been aligned using the same procedure. Before performing any measurements on the sample, the instrument itself is aligned to the direct beam. This is done by changing the $2\theta$ angle until the direct beam is visible in the detector. Using the acquisition software, the direct beam position needs to be chosen using an appropriate region of interest (ROI). The found direct beam position is defined as $2\theta = 0$, after which 2$\theta$ is aligned. Once this is done, the sample needs to be mounted at the sample holder. In the next step, the sample is translated perpendicular to the sample surface until it blocks half of the direct beam intensity, making sure the sample is in the middle of the beam. A rocking curve can then be performed by tilting the $\omega$ angle until a maximum intensity can be observed, which means that the sample surface is parallel to the direct beam. To get a more exact alignment, the sample is typically aligned using a reflected beam as well. Typically during experiments, this alignment was done at 2$\theta$ = 0.4 $\degree$, where  $\omega$ is changed until the reflected beam is in the middle of the ROI window defined in the acquisition software, and the total intensity in the ROI is at a maximum. Once this process is done, the sample tilt should be completely aligned. In order to get a proper alignment for the sample height, a scan is performed where the sample is now translated perpendicular to the sample surface again. The sample height is then set to the center of the obtained measurement. If the resulting beam is not vertical in the ROI window, the sample needs to be rotated around the x-axis. Finally, the beam-stop is used to absorb most of the direct beam intensity.
\section{X-ray instrument}\label{XRR_instrument}
\begin{figure}[b]
	\centering
	\def\svgwidth{\textwidth}
	\input{BraggBrentano.pdf_tex}
	\caption{Illustration of a typical diffractometer in a Bragg-Brentano geometry setup.}
\label{BraggBrentano}
\end{figure}
A commonly used setup for X-ray reflectivity is the Bragg Brentano geometry, which is illustrated in Figure \ref{BraggBrentano}. The relevant angles that are varied durign a measurement are the scattering angle 2$\theta$, which describes the angle between the direct beam and the reflected beam at the detector, and the rocking angle $\omega$ which describes the angle between the incoming beam and the sample surface. The rocking angle $\omega$ can be seen as the tilt of the sample, and is the angle that is being varied during a rocking scan as described in subsection \ref{rocking_scan_section}. From the figure, it can be seen how changing $\omega$ is equivalent to changing the sample tilt. During such a scan, the detector position is adjusted such that the scattering angle 2$\theta$ remains at a fixed angle that is equal to $2\theta$ = 2$\omega$\\
In order to measure specular diffraction patterns, so-called $\omega-2\theta$ where performed. In these measurements, $2\theta$ was typically measured from  $0\degree-12  \degree$ while $\omega$ is kept at $\omega = 2\theta/2$. Off-specular diffraction with X-ray reflectivity was done with the help of rocking curves, where the $2\theta$ position was typically fixed at the $2\theta$ value corresponding to the first Bragg peak of the multilayer. At this position, the rocking angle $\omega$ was varied from $\omega= 0$ to $\omega =  2\theta$, resulting in a specular position at the middle of the scan at $\omega = 2\theta/2$. \\
X-Ray reflectivity measurements were done using a Panalytical Empyrean diffractometer using a Cu-Ka X-ray tube, giving rise to a wavelength of $\lambda = 1.54$ Ã…. A parallel beam X-ray mirror with a divergense slit  of 1/32$\degree$ was used on the incident beam side.  On the diffracted side, a parallel plate collimator has been used in combination with a collimator slit. The used detector is a PIXcel detector in 0D mode. During alignment, a Ni filter was used to attenuate the radiation from the direct beam.


\subsection{Alignment procedure}
A proper alignment is also essential for X-ray reflectivity measurements. For a typical alignment procedure in this work, $2\theta$ has been aligned before doing any measurements on the sample. This is done by doing a $2\theta$ scan on the diffractometer around $2\theta = 0\degree$, and setting the resulting center of the peak at zero degrees. Afterwards the sample can be aligned in the vertical $z$-direction by setting the direct beam at $2\theta = 0\degree$ and moving the sample into the beam until it blocks half of the direct beam intensity. Once this is done, the sample is tilted by changing the $\omega$ angle such that the intensity reaches a maximum value. At this angle, the sample should be parallel to the beam. Since tilting the sample effectively changes the sample height, an additional alignment in the vertical $z$-direction is done until the sample blocks half of the sample beam. Finally, the $2\theta$ is set to a low diffraction angle such that the detector measures the reflected beam. Usually this is done around the first Bragg peak of the multilayer. At this position the sample is tilted again around $\omega$ after which the peak position of the obtained reflectivity curve is set to $\omega=2\theta/2$. After this procedure has been carefully followed, the sample should be aligned and the measurement can begin.


